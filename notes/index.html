<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta content="testing with docker, docker tips, building docker machine, simple timing in node, jade bootstrap layout, mosh iptable rule, javascript median from array, disable ssh string host checking, finding older files, stubbing binaries for testing, hp folio 13 wifi hack, node forever via make, installing nodejs from source, sinatra vs express, installing mysql on centos6" name="keywords">
<meta content="width=device-width, initial-scale=1.0" name="viewport">
<meta content="" name="author">
<link href="//netdna.bootstrapcdn.com/bootswatch/3.0.0/spacelab/bootstrap.min.css" media="screen" rel="stylesheet">
<link href="//cdn.mervine.net/bootstrap/master.css" media="screen" rel="stylesheet">
<!--[if lte IE 6]>
      <link href='http://universal-ie6-css.googlecode.com/files/ie6.1.1.css' media='screen, projection' rel='stylesheet'>
    <![endif]--><!--[if lt IE 9]>
      <script src='//html5shim.googlecode.com/svn/trunk/html5.js'></script>
    <![endif]--><link href="/articles.xml" rel="alternate" type="application/atom+xml">
<link href="//cdn.mervine.net/bootstrap/favicon.ico" rel="shortcut icon">
<link href="//cdn.mervine.net/bootstrap/images/apple-touch-icon.png" rel="apple-touch-icon">
<link href="//cdn.mervine.net/bootstrap/images/apple-touch-icon-72x72.png" rel="apple-touch-icon" sizes="72x72">
<link href="//cdn.mervine.net/bootstrap/images/apple-touch-icon-114x114.png" rel="apple-touch-icon" sizes="114x114">
<title>Notes - mervine.net</title>
</head>
<body style="padding-top: 10px !important">
    <div class="container">
      <div class="navbar navbar-default navbar-top" style="margin-bottom: 0px !important">
        <div class="navbar-header">
          <button class="navbar-toggle" data-target=".navbar-collapse" data-toggle="collapse" type="button">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/">Home</a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
<li class="">
              <a href="http://mervine.net/categories">Category List</a>
            </li>
            <li class="">
              <a href="http://mervine.net/projects">My Projects</a>
            </li>
            <li class="active">
              <a href="http://mervine.net/notes">Notes</a>
            </li>
            <li class="">
              <a href="http://mervine.net/hacks">Hacks</a>
            </li>
            <li class="">
              <a href="http://mervine.net/quotes">Quotes</a>
            </li>
            <li class="">
              <a href="http://mervine.net/archive">Archives</a>
            </li>
          </ul>
<ul class="nav navbar-nav navbar-right visible-xs">
<li>
              <a href="http://twitter.com/mervinej">Twitter</a>
            </li>
            <li>
              <a href="http://linkedin.com/in/mervinej">Linkedin</a>
            </li>
            <li>
              <a href="http://github.com/jmervine">Github</a>
            </li>
            <li>
              <a href="http://www.gittip.com/jmervine">Gittip</a>
            </li>
          </ul>
</div>
      </div>
      <div class="container">
        <div class="page-header" style="margin-top: 0px !important;">
          <img src="http://www.gravatar.com/avatar/ed808193b8c2c8516715816f90a005b2.jpg?s=75" style="padding:5px 15px 15px; float:left"><a href="http://mervine.net/">
            <h1>mervine.net</h1>
          </a><small>Lessons learned, code written, hacks, etc.</small>
        </div>
      </div>
      <div class="container">
        <div class="col-sm-12 col-md-9">
          <div class="page_content container">
  <div class="page_content">
    <h1>Notes</h1>
    
    <blockquote>
<h3>Random notes go here!</h3>
    
    <p>This might feel a little redundant to the <a href="/hacks">hacks</a> section, and truthfully a lot of things that I add here, I might also include there. The main difference is that I'm going to strive to only put things here which are setup in a more reusable way. If it doesn't work out, I'll probably end up combining the sections later.</p>
</blockquote>
    <hr class="article_seperator">
<header><h2>Articles on Notes</h2>
    </header><div class="well" style="padding-top: 0px; padding-bottom: 0px">
  <header><h2>
      <a href="http://mervine.net/notes/testing-with-docker">Testing with Docker</a>
    </h2>
  </header><p>Here are a few tips that I've found useful while delving in to Docker.</p>
  <p class="read_more">
    <a href="http://mervine.net/notes/testing-with-docker">Continue reading</a>
  </p>
  <footer><p class="meta">
      Published
      on
      <time datetime="2015-03-10T13:25:00+00:00" pubdate>10 March 2015</time>
      in
      <a href="http://mervine.net/linux">Linux</a>,
      <a href="http://mervine.net/notes">Notes</a>
    </p>
  </footer>
</div>
<div class="well" style="padding-top: 0px; padding-bottom: 0px">
  <header><h2>
      <a href="http://mervine.net/notes/docker-tips">Docker Tips</a>
    </h2>
  </header><p>Here are a few tips that I've found useful while delving in to <a href="https://www.docker.com/">Docker</a>. For an introduction to Docker, see my post on the <a href="http://engineering.yp.com/post/intro-to-docker">YP Engineering Blog</a>. Enjoy!</p>

<h3>Making smaller images.</h3>

<p>Docker image size does matter. The larger your image, that more unweildy it starts to feel. Pulling a 50MB image is far preferable to pulling a 2G image. Some tips on building smaller images:</p>

<ul>
<li>Use the smallest linux distro which meets your needs; <code>busybox</code> &lt; <code>debian</code> &lt; <code>centos</code> &lt; <code>ubuntu</code>. I try to use <code>progrium/busybox</code> whenever possible (which isn't all that often without serious work), otherwise, I tend to use <code>debian</code>.</li>
<li>Install as little as possible to meet your needs -- <code>apt-get build-essential</code> is going to bloat your image, don't use it unless absolutly necessary.</li>
<li>
<p>Do as much as you can in a single <code>RUN</code>, as opposed to breaking things up. The downside to this is longer builds with less caching. However, it can make a huge difference in resulting image size. I once took an image from 1.3G to 555MB, just by collapsing all my commands to a single <code>RUN</code>. Additionally, clean up after yourself in that same <code>RUN</code> if possible. Example:</p>

<pre class="twilight">  # BAD
  RUN apt-get install git
  RUN apt-get install wget
  RUN apt-get install build-essential
  COPY http://somesite.com/somefile.tgz
  RUN tar xzf somefile.tgz
  RUN cd somefile
  RUN ./configure &amp;&amp; make &amp;&amp; install

  # GOOD
  RUN \
      apt-get install -y git wget build-essential &amp;&amp; \
      curl -sSL -O http://somesite.com/somefile.tgz &amp;&amp; \
      tar xzf somefile.tgz &amp;&amp; \ 
      cd somefile &amp;&amp; ./configure &amp;&amp; make &amp;&amp; install &amp;&amp; \
      cd - &amp;&amp; rm -rf somefile somefile.tgz &amp;&amp; \
      apt-get remove -y build-essential &amp;&amp; \
      apt-get autoremove -y &amp;&amp; apt-get clean
</pre>
</li>
</ul>
<h3>Search private registry.</h3>

<pre class="twilight">sudo docker search <span class="Keyword">&lt;</span>private domain<span class="Keyword">&gt;</span>/<span class="Keyword">&lt;</span>term<span class="Keyword">&gt;</span>
</pre>

<h3>Removing images and containers in bulk.</h3>

<pre class="twilight"><span class="Comment"><span class="Comment">#</span> remove all containers</span>
sudo docker rm <span class="String"><span class="String">$(</span>sudo docker ps -a -q<span class="String">)</span></span>
<span class="Comment"><span class="Comment">#</span>... or ...</span>
sudo docker ps -aq <span class="Keyword">|</span> xargs sudo docker rm

<span class="Comment"><span class="Comment">#</span> remove all images</span>
sudo docker rmi <span class="String"><span class="String">$(</span>sudo docker images -q<span class="String">)</span></span>
<span class="Comment"><span class="Comment">#</span>... or ...</span>
sudo docker images -q <span class="Keyword">|</span> xargs sudo docker rmi

<span class="Comment"><span class="Comment">#</span> remove specific images in bulk</span>
sudo docker rmi myimage:{tagone,tagtwo,tagfive}

<span class="Comment"><span class="Comment">#</span> remove image containing TERM</span>
sudo docker rmi <span class="String"><span class="String">$(</span>sudo docker images <span class="Keyword">|</span> grep TERM <span class="Keyword">|</span> awk <span class="String"><span class="String">'</span>{ print $3 }<span class="String">'</span></span><span class="String">)</span></span>
<span class="Comment"><span class="Comment">#</span>... or ...</span>
sudo docker images <span class="Keyword">|</span> grep TERM <span class="Keyword">|</span> awk <span class="String"><span class="String">'</span>{ print $3 }<span class="String">'</span></span> <span class="Keyword">|</span> xargs sudo docker rmi

<span class="Comment"><span class="Comment">#</span> remove all non-running containers</span>
sudo docker ps -a <span class="Keyword">|</span> grep Exited <span class="Keyword">|</span> awk <span class="String"><span class="String">'</span>{ print $NF }<span class="String">'</span></span> <span class="Keyword">|</span> xargs sudo docker rm
</pre>

<h3>Interacting with the most recent continer started.</h3>

<pre class="twilight"><span class="Comment"><span class="Comment">#</span> view last container</span>
sudo docker ps -l 

<span class="Comment"><span class="Comment">#</span> view last container sha only</span>
sudo docker ps -lq

<span class="Comment"><span class="Comment">#</span> stop, start, attach, logs, etc. last container</span>
<span class="Comment"><span class="Comment">#</span></span>
<span class="Comment"><span class="Comment">#</span> $ sudo docker &lt;action&gt; $(sudo docker ps -lq)</span>
sudo docker start <span class="String"><span class="String">$(</span>sudo docker ps -lq<span class="String">)</span></span>
sudo docker stop <span class="String"><span class="String">$(</span>sudo docker ps -lq<span class="String">)</span></span>
sudo docker logs <span class="String"><span class="String">$(</span>sudo docker ps -lq<span class="String">)</span></span>
sudo docker attach <span class="String"><span class="String">$(</span>sudo docker ps -lq<span class="String">)</span></span>
</pre>

<h3>Pushing to a private registry.</h3>

<pre class="twilight"><span class="Comment"><span class="Comment">#</span> assuming image 'jmervine/centos6-nodejs'</span>
<span class="Comment"><span class="Comment">#</span></span>
<span class="Comment"><span class="Comment">#</span>               &lt;current image name&gt;    &lt;private registry&gt;:&lt;port&gt;/&lt;image name&gt;</span>
sudo docker tag jmervine/centos6-nodejs docker.myregstry.com:5000/jmervine/centos6-nodejs
sudo docker push docker.myregstry.com:5000/jmervine/centos6-nodejs

<span class="Comment"><span class="Comment">#</span> I then recommend removing your old image to avoid accidentally pushing it to the public registry.</span>
sudo docker rmi jmervine/centos6-nodejs
</pre>

<h3>Ports</h3>

<pre class="twilight"><span class="Comment"><span class="Comment">#</span> running randomly assigning host port</span>
sudo docker run -d -p 3000 image/name

<span class="Comment"><span class="Comment">#</span> running with exposed ports randomly assigned on host</span>
sudo docker run -d -P image/name

<span class="Comment"><span class="Comment">#</span> printing randomly assigned ports (only)</span>
sudo docker port image_name <span class="Keyword">|</span> awk -F<span class="String"><span class="String">'</span>:<span class="String">'</span></span> <span class="String"><span class="String">'</span>{ print $NF }<span class="String">'</span></span>
</pre>

<h3>Copying Files TO Containers</h3>

<pre class="twilight"><span class="Comment"><span class="Comment">#</span> Directly in to a running container.</span>
sudo docker exec -it <span class="Keyword">&lt;</span>container_name<span class="Keyword">|</span>name<span class="Keyword">&gt;</span> \
    bash -c <span class="String"><span class="String">"</span>echo <span class="StringConstant">\"</span><span class="String"><span class="String">$(</span>cat /path/to/host/file.txt<span class="String">)</span></span><span class="StringConstant">\"</span> &gt; /path/to/container/file.txt<span class="String">"</span></span>

<span class="Comment"><span class="Comment">#</span> When running a container.</span>
sudo docker run -i <span class="Keyword">&lt;</span>container_id<span class="Keyword">|</span>name<span class="Keyword">&gt;</span> \
    bash -c <span class="String"><span class="String">"</span>echo <span class="StringConstant">\"</span><span class="String"><span class="String">$(</span>cat /path/to/host/file.txt<span class="String">)</span></span><span class="StringConstant">\"</span> &gt; /path/to/container/file.txt; /bin/bash ./start.sh<span class="String">"</span></span>

<span class="Comment"><span class="Comment">#</span> Via Docker volume.</span>
<span class="Comment"><span class="Comment">#</span> - where 'file.txt' is /path/to/host/dir/file.txt</span>
sudo docker run -v /path/to/host/dir:/path/to/container/dir <span class="Keyword">&lt;</span>container_id<span class="Keyword">|</span>name<span class="Keyword">&gt;</span>

<span class="Comment"><span class="Comment">#</span>... or ...</span>
sudo docker run -v /path/to/host/dir:/path/to/container/dir <span class="Keyword">&lt;</span>container_id<span class="Keyword">|</span>name<span class="Keyword">&gt;</span>
cp /path/to/host/file.txt /path/to/host/dir/file.txt

<span class="Comment"><span class="Comment">#</span> Via file system -- untested as of yet.</span>
sudo cp -v /path/to/host/file.txt \
    /var/lib/docker/aufs/mnt/**<span class="String"><span class="String">$(</span>sudo docker inspect -f <span class="String"><span class="String">'</span>{{.Id}}<span class="String">'</span></span> <span class="Keyword">&lt;</span>container_id<span class="Keyword">|</span>name<span class="Keyword">&gt;</span><span class="String">)</span></span>**/root/path/to/container/file.txt
</pre>

<blockquote><p>Based on comments in <a href="http://stackoverflow.com/questions/22907231/copying-files-from-host-to-docker-container">http://stackoverflow.com/questions/22907231/copying-files-from-host-to-docker-container</a></p></blockquote>
  <footer><p class="meta">
      Published
      on
      <time datetime="2015-02-21T15:20:00+00:00" pubdate>21 February 2015</time>
      in
      <a href="http://mervine.net/linux">Linux</a>,
      <a href="http://mervine.net/notes">Notes</a>
    </p>
  </footer>
</div>
<div class="well" style="padding-top: 0px; padding-bottom: 0px">
  <header><h2>
      <a href="http://mervine.net/notes/building-docker-machine">Building Docker Machine</a>
    </h2>
  </header><blockquote>
<p><strong><a href="https://github.com/docker/machine">What's Docker Machine?</a></strong></p>

<p>Machine makes it really easy to create Docker hosts on local hypervisors and cloud providers. It creates servers, installs Docker on them, then configures the Docker client to talk to them</p>
</blockquote>

<p>This wasn't as clear as I was hoping, so here's what I did.</p>

<h3>Mac</h3>

<pre class="twilight">$ uname -sm
Darwin x86_64

$ docker version
Client version: 1.3.0
Client API version: 1.15
Go version (client): go1.3.3
Git commit (client): c78088f
OS/Arch (client): darwin/amd64
Server version: 1.4.1
Server API version: 1.16
Go version (server): go1.3.3
Git commit (server): 5bc2ff8

$ mkdir -p <span class="Variable"><span class="Variable">$</span>GOPATH</span>/src/github.com/docker
$ cd <span class="Variable"><span class="Variable">$</span>GOPATH</span>/src/github.com/docker
$ git clone https://github.com/docker/machine.git
$ cd machine

$ make test
$ ./script/build -os=darwin -arch=amd64
$ mv docker-machine_darwin-amd64 <span class="Variable"><span class="Variable">$</span>GOBIN</span>/docker-machine
</pre>

<h3>Linux</h3>

<pre class="twilight">$ uname -sio
Linux x86_64 GNU/Linux

$ sudo docker version
Client version: 1.4.1
Client API version: 1.16
Go version (client): go1.3.3
Git commit (client): 5bc2ff8
OS/Arch (client): linux/amd64
Server version: 1.4.1
Server API version: 1.16
Go version (server): go1.3.3
Git commit (server): 5bc2ff8

$ mkdir -p <span class="Variable"><span class="Variable">$</span>GOPATH</span>/src/github.com/docker
$ cd <span class="Variable"><span class="Variable">$</span>GOPATH</span>/src/github.com/docker
$ git clone https://github.com/docker/machine.git
$ cd machine

$ sudo make test
$ sudo ./script/build -os=linux -arch=amd64
$ sudo chown <span class="Variable"><span class="Variable">$</span>USER</span>: docker-machine_linux-amd64
$ mv docker-machine_linux-amd64 <span class="Variable"><span class="Variable">$</span>GOBIN</span>/docker-machine
</pre>
  <footer><p class="meta">
      Published
      on
      <time datetime="2015-02-18T11:20:00+00:00" pubdate>18 February 2015</time>
      in
      <a href="http://mervine.net/linux">Linux</a>,
      <a href="http://mervine.net/notes">Notes</a>
    </p>
  </footer>
</div>
<div class="well" style="padding-top: 0px; padding-bottom: 0px">
  <header><h2>
      <a href="http://mervine.net/notes/simple-timing-in-node">Simple Timing in Node.js</a>
    </h2>
  </header><p>I just stumbled upon a cool feature of <a href="http://nodejs.org/">Node.js</a> for adding timing to applications using <code>console.time</code> and console.timeEnd`.</p>

<pre class="twilight"><span class="Comment"><span class="Comment">//</span> pointless example that show all parts</span>
<span class="Entity">console</span><span class="SupportFunction">.time</span>(<span class="String"><span class="String">'</span>timer<span class="String">'</span></span>);
<span class="SupportFunction">setTimeout</span>(<span class="Storage">function</span>() {
    <span class="Entity">console</span><span class="SupportFunction">.timeEnd</span>(<span class="String"><span class="String">'</span>timer<span class="String">'</span></span>);
}, <span class="Constant">500</span>);

<span class="Comment"><span class="Comment">//</span> =&gt; timer: 511ms</span>
</pre>

<blockquote><p>Note: I've heard (and in somecases proven) that in most cases <code>console.</code> method are not asynchronous (i.e. blocking) and therefore should never be used in production code. Notice that in the above example, <code>console.time</code> and <code>console.timeEnd</code> appear to have about 11ms of overhead on my machine.</p></blockquote>
  <footer><p class="meta">
      Published
      on
      <time datetime="2014-01-06T20:00:00+00:00" pubdate>06 January 2014</time>
      in
      <a href="http://mervine.net/hacks">Hacks</a>,
      <a href="http://mervine.net/nodejs">Node.js</a>,
      <a href="http://mervine.net/notes">Notes</a>
    </p>
  </footer>
</div>
<div class="well" style="padding-top: 0px; padding-bottom: 0px">
  <header><h2>
      <a href="http://mervine.net/notes/jade-bootstrap-layout">Jade Bootstrap Layout Template</a>
    </h2>
  </header><p>After using the <a href="/express">Express</a> command line generation untility, you get a very basic <em>layout.jade</em>. Here's the standard modifications I make for use with <a href="http://www.bootstrapcdn.com/">BootstrapCDN</a>.</p>
  <p class="read_more">
    <a href="http://mervine.net/notes/jade-bootstrap-layout">Continue reading</a>
  </p>
  <footer><p class="meta">
    Published
    on
    <time datetime="2013-10-19T10:45:00+00:00" pubdate>19 October 2013</time>
    in
    <a href="http://mervine.net/express">Express</a>,
    <a href="http://mervine.net/nodejs">Node.js</a>,
    <a href="http://mervine.net/notes">Notes</a>
  </p>
</footer>
</div>
<div class="well" style="padding-top: 0px; padding-bottom: 0px">
  <header><h2>
      <a href="http://mervine.net/notes/mosh-iptable-rule">Notes: Mosh IPTable Rules</a>
    </h2>
  </header><p>I recently picked up a <a href="http://www.samsung.com/us/mobile/cell-phones/SM-N900AZKEATT">Note 3</a> and with the larger screen I found myself want to use it for shelling in to my machines. So I started playing with <a href="http://mosh.mit.edu/">Mosh</a> on one of my boxes. I (like hopefully most of you) set strick IPTable rules to keep things locked down as much as possible. I quickly found that (obviously) things weren't working due to this.</p>

<p>To make things work, I added this line to <code>/etc/sysconfig/iptables</code>:</p>

<pre class="twilight">-A INPUT -p udp -m udp --dport 60001:61000 -j ACCEPT
</pre>

<p>Here's the diff:</p>

<pre class="twilight">diff --git a/tmp/iptables.old b/etc/sysconfig/iptables
index d4229ca..b950f1f 100644
<span class="DiffHeader"><span class="DiffHeader">---</span> a/tmp/iptables.old</span>
<span class="DiffHeader"><span class="DiffHeader">+++</span> b/etc/sysconfig/iptables</span>
<span class="DiffHeader"><span class="DiffHeader">@@</span> <span class="DiffHeader">-8,6 +8,7</span> <span class="DiffHeader">@@</span></span>
 -A INPUT -p icmp -j ACCEPT 
 -A INPUT -i lo -j ACCEPT 
 -A INPUT -p tcp -m state --state NEW -m tcp --dport 22 -j ACCEPT 
<span class="DiffInserted"><span class="DiffInserted">+</span>-A INPUT -p udp -m udp --dport 60001:61000 -j ACCEPT</span>
 -A INPUT -j REJECT --reject-with icmp-host-prohibited 
 -A FORWARD -j REJECT --reject-with icmp-host-prohibited 
 COMMIT
</pre>

<p>Once you've added the line, simply restart IPTables like so:</p>

<pre class="twilight">sudo /etc/init.d/iptables condrestart 
</pre>

<p>Enjoy!</p>
  <footer><p class="meta">
      Published
      on
      <time datetime="2013-10-17T09:30:00+00:00" pubdate>17 October 2013</time>
      in
      <a href="http://mervine.net/linux">Linux</a>,
      <a href="http://mervine.net/notes">Notes</a>
    </p>
  </footer>
</div>
<div class="well" style="padding-top: 0px; padding-bottom: 0px">
  <header><h2>
      <a href="http://mervine.net/notes/javascript-median-from-array">Notes: JavaScript `median(Array)`</a>
    </h2>
  </header><pre class="twilight"><span class="Storage">function</span> <span class="Entity">median</span>(<span class="Variable">values</span>) {
    values.<span class="SupportFunction">sort</span>( <span class="Storage">function</span>(a,b) {<span class="Keyword">return</span> a <span class="Keyword">-</span> b;} );
    <span class="Storage">var</span> half <span class="Keyword">=</span> <span class="Support">Math</span>.<span class="SupportFunction">floor</span>(values.<span class="SupportConstant">length</span>/<span class="Constant">2</span>);
    <span class="Keyword">if</span> (values.<span class="SupportConstant">length</span> <span class="Keyword">%</span> <span class="Constant">2</span>) {
        <span class="Keyword">return</span> values[half];
    } <span class="Keyword">else</span> {
        <span class="Keyword">return</span> (values[half<span class="Keyword">-</span><span class="Constant">1</span>] <span class="Keyword">+</span> values[half]) / <span class="Constant">2.0</span>;
    }
}
</pre>
  <footer><p class="meta">
      Published
      on
      <time datetime="2013-07-12T18:00:00+00:00" pubdate>12 July 2013</time>
      in
      <a href="http://mervine.net/nodejs">Node.js</a>,
      <a href="http://mervine.net/notes">Notes</a>
    </p>
  </footer>
</div>
<div class="well" style="padding-top: 0px; padding-bottom: 0px">
  <header><h2>
      <a href="http://mervine.net/notes/disable-ssh-string-host-checking">Notes: Disable SSH Strict Host Checking</a>
    </h2>
  </header><p>What automating tasks with ssh, it can be annoying to be prompted to confirm the <code>authenticity of host</code>.</p>

<pre class="twilight">The authenticity of host 'host.example.com (NN.NN.NN.NN)' can't be established.
RSA key fingerprint is af:78:f8:fb:8a:ae:dd:55:f0:40:51:29:68:27:7e:7c.
Are you sure you want to continue connecting (yes/no)? 
</pre>

<p>Here's a simple way around that:</p>

<pre class="twilight"><span class="Comment"><span class="Comment">#</span> This automatically adds the fingerprint to </span>
<span class="Comment"><span class="Comment">#</span> ~/.ssh/known_hosts</span>
ssh -o StrictHostKeyChecking=no host.example.com

<span class="Comment"><span class="Comment">#</span> This doesn't add fingerprint</span>
ssh -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no host.example.com
</pre>
  <footer><p class="meta">
      Published
      on
      <time datetime="2013-07-11T10:30:00+00:00" pubdate>11 July 2013</time>
      in
      <a href="http://mervine.net/linux">Linux</a>,
      <a href="http://mervine.net/notes">Notes</a>
    </p>
  </footer>
</div>
<div class="well" style="padding-top: 0px; padding-bottom: 0px">
  <header><h2>
      <a href="http://mervine.net/notes/finding-older-files">Notes: Finding Older Files</a>
    </h2>
  </header><p>In this example, I'm finding all files older then 14 days and removing them.</p>

<pre class="twilight">$ find . -type f -mtime +14 <span class="Keyword">|</span> xargs rm
</pre>

<p>In this example, I'm finding top level directoies in <code>/foo/bar/bah</code> that are more then 30 days old and removing them.</p>

<pre class="twilight">$ find /foo/bar/bah -type d -mtime +30 -maxdepth 0 <span class="Keyword">|</span> xargs rm -rf
</pre>

<p>I typically use this for removing, which is why I've used that as an example. This type of thing is great for a cronjob...</p>

<pre class="twilight"><span class="Comment"><span class="Comment">#</span> remove old files daily at 1am</span>
* 1 * * * find /foo/bar/bah -type d -mtime +30 -maxdepth 0 <span class="Keyword">|</span> xargs rm -rf
</pre>
  <footer><p class="meta">
      Published
      on
      <time datetime="2013-07-06T11:30:00+00:00" pubdate>06 July 2013</time>
      in
      <a href="http://mervine.net/bash">Bash</a>,
      <a href="http://mervine.net/linux">Linux</a>,
      <a href="http://mervine.net/notes">Notes</a>
    </p>
  </footer>
</div>
<div class="well" style="padding-top: 0px; padding-bottom: 0px">
  <header><h2>
      <a href="http://mervine.net/notes/stubbing-binaries-for-testing">Stubbing Binaries for Testing</a>
    </h2>
  </header><p>Being a Dev Ops guy, I write <a href="/gems">gems</a>, scripts and hacks that tend to hook in to system binaries. I know, it would probably be better to write C bindings, but heretofore that hasn't been something I really want to tackle. Additionally, I almost always write tests for my stuff. I've come across the problem where my tests pass locally, but not on <a href="http://travis-ci.org">Travis-CI</a>.</p>
  <p class="read_more">
    <a href="http://mervine.net/notes/stubbing-binaries-for-testing">Continue reading</a>
  </p>
  <footer><p class="meta">
      Published
      on
      <time datetime="2013-06-29T12:00:00+00:00" pubdate>29 June 2013</time>
      in
      <a href="http://mervine.net/bash">Bash</a>,
      <a href="http://mervine.net/nodejs">Node.js</a>,
      <a href="http://mervine.net/notes">Notes</a>,
      <a href="http://mervine.net/ruby">Ruby</a>
    </p>
  </footer>
</div>
<div class="well" style="padding-top: 0px; padding-bottom: 0px">
  <header><h2>
      <a href="http://mervine.net/hacks/hp-folio-13-wifi-hack">WiFi/Bluetooth Hack for the HP Folio 13</a>
    </h2>
  </header><p>Someone asked for this recently, I'm not going to go in to great detail at this time, but I found it while looking through <a href="http://gist.github.com/jmervine">my gists</a> and thought I would share.</p>

<p>Simple replace your <code>/etc/rc.local</code> with the following and it should unlock the hardware airplane mode on startup.</p>

<pre class="twilight"><span class="Comment"><span class="Comment">#</span>!/bin/sh -e</span>
<span class="Comment"><span class="Comment">#</span></span>
<span class="Comment"><span class="Comment">#</span> rc.local</span>
<span class="Comment"><span class="Comment">#</span></span>
<span class="Comment"><span class="Comment">#</span> This script is executed at the end of each multiuser runlevel.</span>
<span class="Comment"><span class="Comment">#</span> Make sure that the script will "exit 0" on success or any other</span>
<span class="Comment"><span class="Comment">#</span> value on error.</span>
<span class="Comment"><span class="Comment">#</span></span>
<span class="Comment"><span class="Comment">#</span> In order to enable or disable this script just change the execution</span>
<span class="Comment"><span class="Comment">#</span> bits.</span>
<span class="Comment"><span class="Comment">#</span></span>
<span class="Comment"><span class="Comment">#</span> By default this script does nothing.</span>

rfkill unblock wifi
sleep 5
rmmod -w -s hp-wmi
<span class="Comment"><span class="Comment">#</span>modprobe -r -s hp-wmi</span>

exit 0
</pre>

<p><a href="https://gist.github.com/jmervine/4077523">get the gist</a></p>
  <footer><p class="meta">
      Published
      on
      <time datetime="2013-06-29T11:30:00+00:00" pubdate>29 June 2013</time>
      in
      <a href="http://mervine.net/hacks">Hacks</a>,
      <a href="http://mervine.net/linux">Linux</a>,
      <a href="http://mervine.net/notes">Notes</a>
    </p>
  </footer>
</div>
<div class="well" style="padding-top: 0px; padding-bottom: 0px">
  <header><h2>
      <a href="http://mervine.net/notes/node-forever-via-make">Node.js forever handing via make</a>
    </h2>
  </header><h4>Tasks</h4>

<ul>
<li>start   :: starts application using forever</li>
<li>stop    :: stops application using forever</li>
<li>
<p>restart :: restart application using forever</p>

<pre class="twilight"><span class="Comment"><span class="Comment">#</span> This set's your local directory to to your NODE_PATH</span>
<span class="Variable">NODE_EXEC    = NODE_PATH=.:$(NODE_PATH)</span>

<span class="Comment"><span class="Comment">#</span> This is for local (non `-g`) npm installs.</span>
<span class="Comment"><span class="Comment">#</span> NODE_MODS    = ./node_modules/.bin</span>

<span class="Comment"><span class="Comment">#</span> Some good `forever` options.</span>
<span class="Variable">FOREVER_OPTS = -p ./logs  \</span>
                -l server_out.log \
                -o ./logs/server_out.log \
                -e ./logs/server_err.log \
                --append \
                --plain \
                --minUptime 1000 \
                --spinSleepTime 1000

<span class="Entity">start:</span> setup/dirs
    <span class="Comment"><span class="Comment">#</span> starting app in server mode</span>
    $(NODE_EXEC) $(NODE_MODS)/forever $(FOREVER_OPTS) $@ server.js

<span class="Entity">stop:</span>
    <span class="Comment"><span class="Comment">#</span> stopping app in server mode</span>
    $(NODE_EXEC) $(NODE_MODS)/forever $(FOREVER_OPTS) $@ server.js

<span class="Entity">restart:</span> setup/dirs
    <span class="Comment"><span class="Comment">#</span> restarting app in server mode</span>
    $(NODE_EXEC) $(NODE_MODS)/forever $(FOREVER_OPTS) $@ server.js

<span class="Entity">setup/dirs:</span>
    <span class="Comment"><span class="Comment">#</span> creating required directories for `forever`</span>
    mkdir -p logs pids
</pre>
</li>
</ul>
<p><a href="https://gist.github.com/jmervine/5873934">Get the gist.</a></p>
  <footer><p class="meta">
      Published
      on
      <time datetime="2013-06-26T23:00:00+00:00" pubdate>26 June 2013</time>
      in
      <a href="http://mervine.net/nodejs">Node.js</a>,
      <a href="http://mervine.net/notes">Notes</a>
    </p>
  </footer>
</div>
<div class="well" style="padding-top: 0px; padding-bottom: 0px">
  <header><h2>
      <a href="http://mervine.net/notes/installing-nodejs-from-source">Installing Node.js from Source</a>
    </h2>
  </header><blockquote><p>Note: This has been tested on Ubuntu 12.01. It should also work on most CentOS (Redhat) version and Mac's, but I haven't personally tested it.</p></blockquote>

<p>Copy and save this to a script called something like <code>install_node.sh</code> and run <code>bash install_node.sh</code>. It expects <code>sudo</code> access.</p>

<pre class="twilight"><span class="Comment"><span class="Comment">#</span>!/usr/bin/env bash</span>
set -x
cd /tmp
rm -rf node

set -ue
git clone git://github.com/joyent/node.git

cd node
git checkout v0.10.20

./configure --prefix=/usr
make
sudo make install

<span class="Comment"><span class="Comment">#</span> vim: ft=sh:</span>
</pre>

<p><a href="https://gist.github.com/jmervine/5874395">Get the gist.</a></p>
  <footer><p class="meta">
      Published
      on
      <time datetime="2013-06-26T21:30:00+00:00" pubdate>26 June 2013</time>
      in
      <a href="http://mervine.net/linux">Linux</a>,
      <a href="http://mervine.net/nodejs">Node.js</a>,
      <a href="http://mervine.net/notes">Notes</a>
    </p>
  </footer>
</div>
<div class="well" style="padding-top: 0px; padding-bottom: 0px">
  <header><h2>
      <a href="http://mervine.net/notes/sinatra-vs-express">Hello World: Sinatra vs. Node.js</a>
    </h2>
  </header><h3><a href="/sinatra">Sinatra</a></h3>

<pre class="twilight"><span class="Keyword">require</span> <span class="String"><span class="String">'</span>sinatra<span class="String">'</span></span>
get <span class="String"><span class="String">'</span>/<span class="String">'</span></span> <span class="Keyword">do</span>
  <span class="String"><span class="String">"</span>Hello World<span class="String">"</span></span>
<span class="Keyword">end</span>
</pre>

<h3><a href="/express">Express</a></h3>

<pre class="twilight"><span class="Storage">var</span> app <span class="Keyword">=</span> require(<span class="String"><span class="String">'</span>express<span class="String">'</span></span>);
app.get(<span class="String"><span class="String">'</span>/<span class="String">'</span></span>, <span class="Storage">function</span>(req, res) {
    res.<span class="SupportFunction">send</span>(<span class="String"><span class="String">"</span>Hello World!<span class="String">"</span></span>);
});
app.listen(<span class="Constant">8000</span>);
</pre>
  <footer><p class="meta">
    Published
    on
    <time datetime="2013-06-26T12:30:00+00:00" pubdate>26 June 2013</time>
    in
    <a href="http://mervine.net/express">Express</a>,
    <a href="http://mervine.net/nodejs">Node.js</a>,
    <a href="http://mervine.net/notes">Notes</a>,
    <a href="http://mervine.net/ruby">Ruby</a>,
    <a href="http://mervine.net/sinatra">Sinatra</a>
  </p>
</footer>
</div>
<div class="well" style="padding-top: 0px; padding-bottom: 0px">
  <header><h2>
      <a href="http://mervine.net/hacks/installing-mysql-on-centos6">Install MySQL on CentOS 6</a>
    </h2>
  </header><p>A simple script to install MySQL on CentOS 6.</p>

<pre class="twilight"><span class="Comment"><span class="Comment">#</span>!/usr/bin/bash</span>
<span class="Comment"><span class="Comment">#</span></span>
<span class="Comment"><span class="Comment">#</span> sudo bash &lt; &lt;(curl -s https://gist.github.com/jmervine/5373441/raw/)</span>

set -x
cd /tmp
wget http://dev.mysql.com/get/Downloads/MySQL-5.6/MySQL-shared-5.6.10-1.el6.x86_64.rpm/from/http://cdn.mysql.com/
wget http://dev.mysql.com/get/Downloads/MySQL-5.6/MySQL-client-5.6.10-1.el6.x86_64.rpm/from/http://cdn.mysql.com/
wget http://dev.mysql.com/get/Downloads/MySQL-5.6/MySQL-server-5.6.10-1.el6.x86_64.rpm/from/http://cdn.mysql.com/
wget http://dev.mysql.com/get/Downloads/MySQL-5.6/MySQL-devel-5.6.10-1.el6.i686.rpm/from/http://cdn.mysql.com/

rpm -qa <span class="Keyword">|</span> grep mysql-libs <span class="Keyword">&amp;&amp;</span> yum remove -y mysql-libs

yum install -y MySQL-shared-5.6.10-1.el6.x86_64.rpm
yum install -y MySQL-client-5.6.10-1.el6.x86_64.rpm
yum install -y MySQL-server-5.6.10-1.el6.x86_64.rpm
yum install -y MySQL-devel-5.6.10-1.el6.i686.rpm
</pre>

<p><a href="https://gist.github.com/jmervine/5373441">Link to gist.</a></p>
  <footer><p class="meta">
      Published
      on
      <time datetime="2013-04-12T10:00:00+00:00" pubdate>12 April 2013</time>
      in
      <a href="http://mervine.net/hacks">Hacks</a>,
      <a href="http://mervine.net/linux">Linux</a>,
      <a href="http://mervine.net/notes">Notes</a>
    </p>
  </footer>
</div>
    
    <hr class="article_seperator">
<br><div id="disqus_thread">
      <script async src="http://rubyops.disqus.com/embed.js" type="text/javascript"></script><noscript>
        <a href="http://rubyops.disqus.com/embed.js?url=ref">View comments.</a>
      </noscript>
    </div>
  </div>
</div>
        </div>
        <div class="col-md-3 visible-md visible-lg">
          <div class="sidebar-nav">
              <ul class="share-buttons">
<li>
                  <a href="https://www.facebook.com/sharer/sharer.php?u=http://mervine.net/notes" target="_blank">
                    <img src="//cdn.mervine.net/bootstrap/images/simple_icons/Facebook.png"></a>
                </li>
                <li>
                  <a href="https://twitter.com/intent/tweet?url=http://mervine.net/notes&amp;text=Notes%20-%20mervine.net%20-%20&amp;via=mervinej" target="_blank" title="Tweet">
                    <img src="//cdn.mervine.net/bootstrap/images/simple_icons/Twitter.png"></a>
                </li>
                <li>
                  <a href="https://plus.google.com/share?url=http://mervine.net/notes" target="_blank" title="Share on Google+">
                    <img src="//cdn.mervine.net/bootstrap/images/simple_icons/Google.png"></a>
                </li>
                <li>
                  <a href="http://www.reddit.com/submit?url=http://mervine.net/notes&amp;title=Notes%20-%20mervine.net" target="_blank" title="Submit to Reddit">
                    <img src="//cdn.mervine.net/bootstrap/images/simple_icons/Reddit.png"></a>
                </li>
                <li>
                  <a href="http://www.linkedin.com/shareArticle?mini=true&amp;url=http://mervine.net/notes&amp;title=Notes%20-%20mervine.net&amp;source=http://mervine.net/notes" target="_blank" title="Share on LinkedIn">
                    <img src="//cdn.mervine.net/bootstrap/images/simple_icons/LinkedIn.png"></a>
                </li>
              </ul>
<div class="list-group">
                <a class="list-group-item active" href="#">
                  <h4 class="list-group-item-heading">More on This</h4>
                </a>
                <a class="list-group-item" href="/notes/bind-mysql-to-localhost">Bind MySQL to localhost</a>
                <a class="list-group-item" href="/notes/zshrc-pry-or-irb">Choosing between Pry or IRB</a>
                <a class="list-group-item" href="/notes/hosting-review">Hosting Review - QuestaVOLTA</a>
                <a class="list-group-item" href="/notes/install-nginx-via-yum">Install Nginx via yum</a>
                <a class="list-group-item" href="/notes/install-script-list">List of Install Scripts</a>
                <a class="list-group-item" href="/notes/perf_rb">Simple Perf Script - perf.rb</a>
              </div>
              <div class="list-group">
<a class="list-group-item active" href="http://joshua.mervine.net/">
                  <h4 class="list-group-item-heading">Joshua P. Mervine</h4>
                </a><a class="list-group-item" href="http://twitter.com/mervinej">Twitter</a>
            <a class="list-group-item" href="http://linkedin.com/in/mervinej">Linkedin</a>
            <a class="list-group-item" href="http://github.com/jmervine">Github</a>
            <a class="list-group-item" href="http://www.gittip.com/jmervine">Gittip</a>
              </div>
            </div>
        </div>
      </div>
      <center>
        <br><div id="footer">
            <div class="container">
              <p class="muted credit">
                Powered by Nesta, a
                <a href="http://nestacms.com">Ruby CMS</a>.
              </p>
            </div>
          </div>
      </center>
    </div>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script><script async src="//netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js" type="text/javascript"></script><script>
      var searchElement = 'input[name=q]';
    </script><script async src="//cdn.jsdelivr.net/jquery.webpage-vim/0.1/vim.min.js" type="text/javascript"></script><script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-32343843-1']);
        _gaq.push(['_trackPageview']);
        (function() {
          var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
          ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
          var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
      </script>
</body>
</html>
