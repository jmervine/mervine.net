<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta content="pretty sleep using nodejs, finding older files, stubbing binaries for testing, curl https inscure, rails script server unicorn replacement, bash version checking, executing bash from python, executing bash from ruby, bash arrays, sourcing and setting environment variables in ruby" name="keywords">
<meta content="width=device-width, initial-scale=1.0" name="viewport">
<meta content="" name="author">
<link href="//netdna.bootstrapcdn.com/bootswatch/3.0.0/spacelab/bootstrap.min.css" media="screen" rel="stylesheet">
<link href="//cdn.mervine.net/bootstrap/master.css" media="screen" rel="stylesheet">
<!--[if lte IE 6]>
      <link href='http://universal-ie6-css.googlecode.com/files/ie6.1.1.css' media='screen, projection' rel='stylesheet'>
    <![endif]--><!--[if lt IE 9]>
      <script src='//html5shim.googlecode.com/svn/trunk/html5.js'></script>
    <![endif]--><link href="/articles.xml" rel="alternate" type="application/atom+xml">
<link href="//cdn.mervine.net/bootstrap/favicon.ico" rel="shortcut icon">
<link href="//cdn.mervine.net/bootstrap/images/apple-touch-icon.png" rel="apple-touch-icon">
<link href="//cdn.mervine.net/bootstrap/images/apple-touch-icon-72x72.png" rel="apple-touch-icon" sizes="72x72">
<link href="//cdn.mervine.net/bootstrap/images/apple-touch-icon-114x114.png" rel="apple-touch-icon" sizes="114x114">
<title>Bash - mervine.net</title>
</head>
<body style="padding-top: 10px !important">
    <div class="container">
      <div class="navbar navbar-default navbar-top" style="margin-bottom: 0px !important">
        <div class="navbar-header">
          <button class="navbar-toggle" data-target=".navbar-collapse" data-toggle="collapse" type="button">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/">Home</a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
<li class="">
              <a href="http://mervine.net/categories">Category List</a>
            </li>
            <li class="">
              <a href="http://mervine.net/projects">My Projects</a>
            </li>
            <li class="">
              <a href="http://mervine.net/notes">Notes</a>
            </li>
            <li class="">
              <a href="http://mervine.net/hacks">Hacks</a>
            </li>
            <li class="">
              <a href="http://mervine.net/quotes">Quotes</a>
            </li>
            <li class="">
              <a href="http://mervine.net/archive">Archives</a>
            </li>
          </ul>
<ul class="nav navbar-nav navbar-right visible-xs">
<li>
              <a href="http://twitter.com/mervinej">Twitter</a>
            </li>
            <li>
              <a href="http://linkedin.com/in/mervinej">Linkedin</a>
            </li>
            <li>
              <a href="http://github.com/jmervine">Github</a>
            </li>
            <li>
              <a href="http://www.gittip.com/jmervine">Gittip</a>
            </li>
          </ul>
</div>
      </div>
      <div class="container">
        <div class="page-header" style="margin-top: 0px !important;">
          <img src="http://www.gravatar.com/avatar/ed808193b8c2c8516715816f90a005b2.jpg?s=75" style="padding:5px 15px 15px; float:left"><a href="http://mervine.net/">
            <h1>mervine.net</h1>
          </a><small>Lessons learned, code written, hacks, etc.</small>
        </div>
      </div>
      <div class="container">
        <div class="col-sm-12 col-md-9">
          <div class="page_content container">
  <div class="page_content">
    <h1>Bash</h1>
    
    <blockquote><p><a href="https://www.gnu.org/software/bash/bash.html">Bash</a> is the GNU Project's shell. Bash is the Bourne Again SHell. Bash is an sh-compatible shell that incorporates useful features from the Korn shell (ksh) and C shell (csh). It is intended to conform to the IEEE POSIX P1003.2/ISO 9945.2 Shell and Tools standard. It offers functional improvements over sh for both programming and interactive use. In addition, most sh scripts can be run by Bash without modification.</p></blockquote>
    <hr class="article_seperator">
<header><h2>Articles on Bash</h2>
    </header><div class="well" style="padding-top: 0px; padding-bottom: 0px">
  <header><h2>
      <a href="http://mervine.net/hacks/pretty-sleep-using-nodejs">Pretty Sleep using Node.js</a>
    </h2>
  </header><pre class="twilight"><span class="Keyword">$</span> node <span class="Keyword">-</span>e <span class="String"><span class="String">'</span>n=0; setInterval(function(){n++;if(n&gt;=20){console.log(".");process.exit(0);}process.stdout.write(".");},1000);<span class="String">'</span></span>
</pre>
  <footer><p class="meta">
        Published
        on
        <time datetime="2013-08-16T10:30:00+00:00" pubdate>16 August 2013</time>
        in
        <a href="http://mervine.net/bash">Bash</a>,
        <a href="http://mervine.net/hacks">Hacks</a>,
        <a href="http://mervine.net/linux">Linux</a>,
        <a href="http://mervine.net/nodejs">Node.js</a>
      </p>
    </footer>
</div>
<div class="well" style="padding-top: 0px; padding-bottom: 0px">
  <header><h2>
      <a href="http://mervine.net/notes/finding-older-files">Notes: Finding Older Files</a>
    </h2>
  </header><p>In this example, I'm finding all files older then 14 days and removing them.</p>

<pre class="twilight">$ find . -type f -mtime +14 <span class="Keyword">|</span> xargs rm
</pre>

<p>In this example, I'm finding top level directoies in <code>/foo/bar/bah</code> that are more then 30 days old and removing them.</p>

<pre class="twilight">$ find /foo/bar/bah -type d -mtime +30 -maxdepth 0 <span class="Keyword">|</span> xargs rm -rf
</pre>

<p>I typically use this for removing, which is why I've used that as an example. This type of thing is great for a cronjob...</p>

<pre class="twilight"><span class="Comment"><span class="Comment">#</span> remove old files daily at 1am</span>
* 1 * * * find /foo/bar/bah -type d -mtime +30 -maxdepth 0 <span class="Keyword">|</span> xargs rm -rf
</pre>
  <footer><p class="meta">
        Published
        on
        <time datetime="2013-07-06T11:30:00+00:00" pubdate>06 July 2013</time>
        in
        <a href="http://mervine.net/bash">Bash</a>,
        <a href="http://mervine.net/linux">Linux</a>,
        <a href="http://mervine.net/notes">Notes</a>
      </p>
    </footer>
</div>
<div class="well" style="padding-top: 0px; padding-bottom: 0px">
  <header><h2>
      <a href="http://mervine.net/notes/stubbing-binaries-for-testing">Stubbing Binaries for Testing</a>
    </h2>
  </header><p>Being a Dev Ops guy, I write <a href="/gems">gems</a>, scripts and hacks that tend to hook in to system binaries. I know, it would probably be better to write C bindings, but heretofore that hasn't been something I really want to tackle. Additionally, I almost always write tests for my stuff. I've come across the problem where my tests pass locally, but not on <a href="http://travis-ci.org">Travis-CI</a>.</p>
  <p class="read_more">
    <a href="http://mervine.net/notes/stubbing-binaries-for-testing">Continue reading</a>
  </p>
  <footer><p class="meta">
        Published
        on
        <time datetime="2013-06-29T12:00:00+00:00" pubdate>29 June 2013</time>
        in
        <a href="http://mervine.net/bash">Bash</a>,
        <a href="http://mervine.net/nodejs">Node.js</a>,
        <a href="http://mervine.net/notes">Notes</a>,
        <a href="http://mervine.net/ruby">Ruby</a>
      </p>
    </footer>
</div>
<div class="well" style="padding-top: 0px; padding-bottom: 0px">
  <header><h2>
      <a href="http://mervine.net/hacks/curl-https-inscure">Using curl to Test HTTPS with Self Signed Certs</a>
    </h2>
  </header><pre class="twilight">$ curl https://<span class="Keyword">&lt;</span>domain<span class="Keyword">&gt;</span>/path/to.html --insecure
</pre>

<blockquote><p>Also see: <a href="/https-self-signed-certs">HTTPS: Creating Slef-signed Certs</a>.</p></blockquote>
  <footer><p class="meta">
        Published
        on
        <time datetime="2013-03-28T16:00:00+00:00" pubdate>28 March 2013</time>
        in
        <a href="http://mervine.net/bash">Bash</a>,
        <a href="http://mervine.net/hacks">Hacks</a>,
        <a href="http://mervine.net/linux">Linux</a>
      </p>
    </footer>
</div>
<div class="well" style="padding-top: 0px; padding-bottom: 0px">
  <header><h2>
      <a href="http://mervine.net/hacks/rails-script-server-unicorn-replacement">Rails script/server Unicorn Replacement</a>
    </h2>
  </header><p>A script to replace <code>script/server</code> in Rails, which runs Unicorn over Webrick, because it's faster. This script is designed for <strong>development only</strong>!</p>
  <p class="read_more">
    <a href="http://mervine.net/hacks/rails-script-server-unicorn-replacement">Continue reading</a>
  </p>
  <footer><p class="meta">
        Published
        on
        <time datetime="2012-10-19T18:30:00+00:00" pubdate>19 October 2012</time>
        in
        <a href="http://mervine.net/bash">Bash</a>,
        <a href="http://mervine.net/hacks">Hacks</a>,
        <a href="http://mervine.net/ruby">Ruby</a>
      </p>
    </footer>
</div>
<div class="well" style="padding-top: 0px; padding-bottom: 0px">
  <header><h2>
      <a href="http://mervine.net/hacks/bash-version-checking">Minimum Version Checking with BASH/ZSH</a>
    </h2>
  </header><h4>Thanks to <a href="https://twitter.com/retr0h">@retr0h</a>:</h4>

<pre class="twilight">[[ <span class="String"><span class="String">$(</span>zsh --version <span class="Keyword">|</span> awk <span class="String"><span class="String">'</span>{print $2}<span class="String">'</span></span><span class="String">)</span></span> <span class="Keyword">&gt;</span> 4.3.17 ]]

<span class="Comment"><span class="Comment">#</span> usage</span>

<span class="Keyword">if</span> [[ <span class="String"><span class="String">$(</span>zsh --version <span class="Keyword">|</span> awk <span class="String"><span class="String">'</span>{print $2}<span class="String">'</span></span><span class="String">)</span></span> <span class="Keyword">&gt;</span> 4.3.17 ]]<span class="Keyword">;</span> <span class="Keyword">then</span>
    <span class="Comment"><span class="Comment">#</span> do someting that only higher zsh versions support</span>
<span class="Keyword">else</span>
    <span class="Comment"><span class="Comment">#</span> do something else for low versions</span>
<span class="Keyword">fi</span>
</pre>

<hr>
<blockquote>
<p>This was my origitional (not so sexy solution).</p>

<p>The following line will print <code>zsh</code> version information if the version is greater then or equal to 4.3.17, otherwise it will return blank:</p>

<pre class="twilight">zsh --version <span class="Keyword">|</span> awk <span class="String"><span class="String">'</span>{print $2}<span class="String">'</span></span> <span class="Keyword">|</span> awk -F<span class="String"><span class="String">'</span>.<span class="String">'</span></span> <span class="String"><span class="String">'</span> ( $1 &gt; 4 || ( $1 == 4 &amp;&amp; $2 &gt; 3 ) || ( $1 == 4 &amp;&amp; $2 == 3 &amp;&amp; $3 &gt;= 17 ) ) <span class="String">'</span></span>
</pre>

<p>An example usage would be something like:</p>

<pre class="twilight"><span class="Comment"><span class="Comment">#</span>!/usr/bin/env bash</span>
<span class="Keyword">if</span> test <span class="String"><span class="String">"</span><span class="String"><span class="String">$(</span> zsh --version <span class="Keyword">|</span> awk <span class="String"><span class="String">'</span>{print $2}<span class="String">'</span></span> <span class="Keyword">|</span> awk -F<span class="String"><span class="String">'</span>.<span class="String">'</span></span> <span class="String"><span class="String">'</span> ( $1 &gt; 4 || ( $1 == 4 &amp;&amp; $2 &gt; 3 ) || ( $1 == 4 &amp;&amp; $2 == 3 &amp;&amp; $3 &gt;= 17 ) ) <span class="String">'</span></span> <span class="String">)</span></span><span class="String">"</span></span>
<span class="Keyword">then</span>
    <span class="Comment"><span class="Comment">#</span> do someting that only higher zsh versions support</span>
<span class="Keyword">else</span>
    <span class="Comment"><span class="Comment">#</span> do something else for low versions</span>
<span class="Keyword">fi</span>
</pre>
</blockquote>
  <footer><p class="meta">
        Published
        on
        <time datetime="2012-10-19T12:00:00+00:00" pubdate>19 October 2012</time>
        in
        <a href="http://mervine.net/bash">Bash</a>,
        <a href="http://mervine.net/hacks">Hacks</a>,
        <a href="http://mervine.net/linux">Linux</a>,
        <a href="http://mervine.net/zsh">ZSH</a>
      </p>
    </footer>
</div>
<div class="well" style="padding-top: 0px; padding-bottom: 0px">
  <header><h2>
      <a href="http://mervine.net/executing-bash-from-python">Executing BASH from Python</a>
    </h2>
  </header><p>Recently, I've been playing with [Python], I thought I would toss up this writeup I found on executing commands via [Python] I found as a follow up to my <a href="http://mervine.net/2012/09/05/executing_bash_from_ruby">Executing BASH Commmands in Ruby</a> post.</p>
  <p class="read_more">
    <a href="http://mervine.net/executing-bash-from-python">Continue reading</a>
  </p>
  <footer><p class="meta">
        Published
        on
        <time datetime="2012-09-15T13:08:00+00:00" pubdate>15 September 2012</time>
        in
        <a href="http://mervine.net/bash">Bash</a>,
        <a href="http://mervine.net/python">Python</a>
      </p>
    </footer>
</div>
<div class="well" style="padding-top: 0px; padding-bottom: 0px">
  <header><h2>
      <a href="http://mervine.net/executing-bash-from-ruby">Executing BASH from Ruby</a>
    </h2>
  </header><p>Found this today and thought I would share...</p>
  <p class="read_more">
    <a href="http://mervine.net/executing-bash-from-ruby">Continue reading</a>
  </p>
  <footer><p class="meta">
        Published
        on
        <time datetime="2012-09-05T04:02:00+00:00" pubdate>05 September 2012</time>
        in
        <a href="http://mervine.net/bash">Bash</a>,
        <a href="http://mervine.net/ruby">Ruby</a>
      </p>
    </footer>
</div>
<div class="well" style="padding-top: 0px; padding-bottom: 0px">
  <header><h2>
      <a href="http://mervine.net/bash-arrays">BASH Arrays</a>
    </h2>
  </header><p>Basic Array handling in BASH, because I always forget.</p>

<pre class="twilight"><span class="Comment"><span class="Comment">#</span> basic itteration</span>
items=( a b c d e )

<span class="Keyword">for</span> i <span class="Keyword">in</span> <span class="String"><span class="String">"</span><span class="StringVariable"><span class="StringVariable">${</span>items[@]<span class="StringVariable">}</span></span><span class="String">"</span></span>
<span class="Keyword">do</span>
    echo -n <span class="Variable"><span class="Variable">$</span>i</span>
<span class="Keyword">done</span>

<span class="Comment"><span class="Comment">#</span>=&gt; abcde</span>

<span class="Comment"><span class="Comment">#</span> update specific array slot</span>
items[1]=<span class="String"><span class="String">"</span>foo<span class="String">"</span></span>

<span class="Comment"><span class="Comment">#</span> access specific array slot</span>
echo <span class="Variable"><span class="Variable">${</span>items[1]<span class="Variable">}</span></span>

<span class="Comment"><span class="Comment">#</span>=&gt; foo</span>
</pre>
  <footer><p class="meta">
        Published
        on
        <time datetime="2012-05-30T00:32:00+00:00" pubdate>30 May 2012</time>
        in
        <a href="http://mervine.net/bash">Bash</a>,
        <a href="http://mervine.net/hacks">Hacks</a>,
        <a href="http://mervine.net/linux">Linux</a>
      </p>
    </footer>
</div>
<div class="well" style="padding-top: 0px; padding-bottom: 0px">
  <header><h2>
      <a href="http://mervine.net/sourcing-and-setting-environment-variables-in-ruby">Sourcing and Setting Environment Variables in Ruby</a>
    </h2>
  </header><p>I was looking for a simple way to source and set a bash environment variable from a file, in this specific instance, I can't be 100% sure that the any steps I take to ensure that the file itself is sourced on the host before Rails is started, nor can I impact the format of the file itself (e.g. changing it to YAML).</p>
  <p class="read_more">
    <a href="http://mervine.net/sourcing-and-setting-environment-variables-in-ruby">Continue reading</a>
  </p>
  <footer><p class="meta">
        Published
        on
        <time datetime="2012-05-29T17:49:00+00:00" pubdate>29 May 2012</time>
        in
        <a href="http://mervine.net/bash">Bash</a>,
        <a href="http://mervine.net/ruby">Ruby</a>
      </p>
    </footer>
</div>
    
    <hr class="article_seperator">
<br><div id="disqus_thread">
      <script async src="http://rubyops.disqus.com/embed.js" type="text/javascript"></script><noscript>
        <a href="http://rubyops.disqus.com/embed.js?url=ref">View comments.</a>
      </noscript>
    </div>
  </div>
</div>
        </div>
        <div class="col-md-3 visible-md visible-lg">
          <div class="sidebar-nav">
              <ul class="share-buttons">
<li>
                  <a href="https://www.facebook.com/sharer/sharer.php?u=http://mervine.net/bash" target="_blank">
                    <img src="//cdn.mervine.net/bootstrap/images/simple_icons/Facebook.png"></a>
                </li>
                <li>
                  <a href="https://twitter.com/intent/tweet?url=http://mervine.net/bash&amp;text=Bash%20-%20mervine.net%20-%20&amp;via=mervinej" target="_blank" title="Tweet">
                    <img src="//cdn.mervine.net/bootstrap/images/simple_icons/Twitter.png"></a>
                </li>
                <li>
                  <a href="https://plus.google.com/share?url=http://mervine.net/bash" target="_blank" title="Share on Google+">
                    <img src="//cdn.mervine.net/bootstrap/images/simple_icons/Google.png"></a>
                </li>
                <li>
                  <a href="http://www.reddit.com/submit?url=http://mervine.net/bash&amp;title=Bash%20-%20mervine.net" target="_blank" title="Submit to Reddit">
                    <img src="//cdn.mervine.net/bootstrap/images/simple_icons/Reddit.png"></a>
                </li>
                <li>
                  <a href="http://www.linkedin.com/shareArticle?mini=true&amp;url=http://mervine.net/bash&amp;title=Bash%20-%20mervine.net&amp;source=http://mervine.net/bash" target="_blank" title="Share on LinkedIn">
                    <img src="//cdn.mervine.net/bootstrap/images/simple_icons/LinkedIn.png"></a>
                </li>
              </ul>
<div class="list-group">
                <a class="list-group-item active" href="#">
                  <h4 class="list-group-item-heading">More on This</h4>
                </a>
                <a class="list-group-item" href="/bash-one-liners">Bash One Liners</a>
              </div>
              <div class="list-group">
<a class="list-group-item active" href="http://joshua.mervine.net/">
                  <h4 class="list-group-item-heading">Joshua P. Mervine</h4>
                </a><a class="list-group-item" href="http://twitter.com/mervinej">Twitter</a>
            <a class="list-group-item" href="http://linkedin.com/in/mervinej">Linkedin</a>
            <a class="list-group-item" href="http://github.com/jmervine">Github</a>
            <a class="list-group-item" href="http://www.gittip.com/jmervine">Gittip</a>
              </div>
            </div>
        </div>
      </div>
      <center>
        <br><div id="footer">
            <div class="container">
              <p class="muted credit">
                Powered by Nesta, a
                <a href="http://nestacms.com">Ruby CMS</a>.
              </p>
            </div>
          </div>
      </center>
    </div>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script><script async src="//netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js" type="text/javascript"></script><script>
      var searchElement = 'input[name=q]';
    </script><script async src="//cdn.jsdelivr.net/jquery.webpage-vim/0.1/vim.min.js" type="text/javascript"></script><script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-32343843-1']);
        _gaq.push(['_trackPageview']);
        (function() {
          var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
          ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
          var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
      </script>
</body>
</html>
